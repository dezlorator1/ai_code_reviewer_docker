# ü§ñ AI Code Reviewer

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥-—Ä–µ–≤—å—é–µ—Ä –Ω–∞ –±–∞–∑–µ –ª–æ–∫–∞–ª—å–Ω–æ–π LLM –¥–ª—è OpenSearch –ø–ª–∞–≥–∏–Ω–æ–≤.

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `git diff` –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏, –≤—ã—è–≤–ª—è–µ—Ç –±–∞–≥–∏, –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

---

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ –±–∞–≥–æ–≤, null pointer, –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è **–§–æ–∫—É—Å –Ω–∞ Query Language** ‚Äî –≤—ã—è–≤–ª–µ–Ω–∏–µ breaking changes –≤ —è–∑—ã–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- üîó **–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî –ø–æ–Ω–∏–º–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ –≤ –æ–¥–Ω–æ–º MR
- üìä **–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º** ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- üê≥ **Docker** ‚Äî –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- üîå **–õ–æ–∫–∞–ª—å–Ω–∞—è LLM** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–∏–º LM Studio / Ollama / –¥—Ä—É–≥–∏–º API

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker Desktop (Windows/Mac) –∏–ª–∏ Docker + Docker Compose (Linux)
- –ó–∞–ø—É—â–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è LLM (LM Studio, Ollama, –∏–ª–∏ –¥—Ä—É–≥–∞—è —Å OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º API)
- Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∫–æ–¥–æ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

–°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º `docker-compose.yml`:

```
ai-code-reviewer/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ dockerfile
‚îú‚îÄ‚îÄ config.yml
‚îú‚îÄ‚îÄ entrypoint.sh
‚îú‚îÄ‚îÄ *.py                    # Python —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ *.sh                    # Bash —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ inputs/                 # üëà –°—é–¥–∞ –∫–ª–∞–¥–µ—Ç–µ diff —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ feature-branch.diff
‚îú‚îÄ‚îÄ review_results/         # üëà –°—é–¥–∞ –ø–æ–ø–∞–¥—É—Ç –æ—Ç—á–µ—Ç—ã (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ review_logs/            # üëà –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ diff —Ñ–∞–π–ª–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –ú–µ–∂–¥—É –≤–µ—Ç–∫–æ–π –∏ dev**
```bash
cd /path/to/your/project
git diff dev..feature-branch > feature-branch.diff
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ú–µ–∂–¥—É –∫–æ–º–º–∏—Ç–∞–º–∏**
```bash
git diff abc123..def456 > changes.diff
```

**–í–∞—Ä–∏–∞–Ω—Ç C: Staged changes**
```bash
git diff --staged > staged-changes.diff
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `.diff` —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `inputs/`.

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ docker-compose.yml

–û—Ç–∫—Ä–æ–π—Ç–µ `docker-compose.yml` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç–∏:

```yaml
services:
  code-review:
    build: .
    volumes:
      # 1Ô∏è‚É£ –í–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã (READ-ONLY –¥–æ—Å—Ç—É–ø –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
      - C:\Work\Projects:/projects           # Windows
      # - /home/user/projects:/projects      # Linux/Mac
      
      # 2Ô∏è‚É£ –ü–∞–ø–∫–∞ —Å diff —Ñ–∞–π–ª–∞–º–∏
      - ./inputs:/inputs
      
      # 3Ô∏è‚É£ –ö—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç—á–µ—Ç—ã
      - ./review_results:/app/output
      
      # 4Ô∏è‚É£ –õ–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - ./review_logs:/app/logs

    environment:
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π LLM
      - LLM_API_URL=http://host.docker.internal:1234/v1/chat/completions
      - LLM_MODEL=gpt-oss-20b           # –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ LM Studio
      - LLM_TEMPERATURE=0.2
      - LLM_MAX_TOKENS=16000

    # ‚¨áÔ∏è –ó–î–ï–°–¨ –£–ö–ê–ñ–ò–¢–ï –ü–£–¢–ò –ö –í–ê–®–ò–ú –§–ê–ô–õ–ê–ú
    command: >
      --diff /inputs/feature-branch.diff
      --project /projects/opensearch-sql-plugin
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ LLM

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∞ LLM –¥–æ—Å—Ç—É–ø–Ω–∞:

**LM Studio:**
- –û—Ç–∫—Ä–æ–π—Ç–µ LM Studio
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 13B-20B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (–æ–±—ã—á–Ω–æ –ø–æ—Ä—Ç 1234)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `curl http://localhost:1234/v1/models`

**Ollama:**
```bash
ollama serve
# API –±—É–¥–µ—Ç –Ω–∞ http://localhost:11434
# –í docker-compose.yml –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç: host.docker.internal:11434
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Windows (PowerShell/CMD)

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å docker-compose.yml
cd C:\path\to\ai-code-reviewer

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–≤—å—é
docker compose run --rm code-review --diff /inputs/3078.diff --project /projects/sm-rsm
```

### Linux/Mac

```bash
cd /path/to/ai-code-reviewer

docker compose run --rm code-review \
  --diff /inputs/feature.diff \
  --project /projects/my-opensearch-plugin
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞

```bash
docker compose run --rm code-review \
  --diff /inputs/<–ò–ú–Ø_DIFF_–§–ê–ô–õ–ê> \
  --project /projects/<–ò–ú–Ø_–ü–ê–ü–ö–ò_–ü–†–û–ï–ö–¢–ê>
```

**–í–∞–∂–Ω–æ:**
- `--diff` ‚Äî –ø—É—Ç—å –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤—Å–µ–≥–¥–∞ `/inputs/...`)
- `--project` ‚Äî –ø—É—Ç—å –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤—Å–µ–≥–¥–∞ `/projects/...`)
- –≠—Ç–∏ –ø—É—Ç–∏ –º–∞–ø—è—Ç—Å—è –∏–∑ –≤–∞—à–∏—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–∞–ø–æ–∫ —á–µ—Ä–µ–∑ `volumes` –≤ docker-compose.yml

---

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
[1/5] –û—á–∏—Å—Ç–∫–∞ —Ä–∞–±–æ—á–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π...
[2/5] –ê–Ω–∞–ª–∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ MR...      ‚Üê –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
[3/5] –†–∞–∑–±–∏–µ–Ω–∏–µ diff —Ñ–∞–π–ª–∞ –Ω–∞ —á–∞–Ω–∫–∏...         ‚Üê –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ñ–∞–π–ª–∞–º
[4/5] –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ LLM...              ‚Üê –†–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è!)
[5/5] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞...           ‚Üê –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ diff –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–∞—à–µ–π LLM
- ~30 —Å–µ–∫ –Ω–∞ —Ñ–∞–π–ª (–Ω–∞ –±—ã—Å—Ç—Ä–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏)
- –î–ª—è 20 —Ñ–∞–π–ª–æ–≤: ~10-15 –º–∏–Ω—É—Ç

---

## üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ `review_results/` –ø–æ—è–≤—è—Ç—Å—è:

```
review_results/
‚îú‚îÄ‚îÄ mr_context.md          # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç MR (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
‚îú‚îÄ‚îÄ summary.md             # üéØ –ì–õ–ê–í–ù–´–ô –§–ê–ô–õ - —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)
‚îî‚îÄ‚îÄ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ summary.md

```markdown
# –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –∫–æ–¥-—Ä–µ–≤—å—é

**–î–∞—Ç–∞:** 2024-01-15 14:30:00
**–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 15

## Executive Summary
[–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π]
**–í–ª–∏—è–Ω–∏–µ –Ω–∞ Query Language:** BREAKING / COMPATIBLE / NONE

## ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Query Language
### Breaking Changes
[–ö—Ä–∏—Ç–∏—á–Ω–æ! –ò–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–º–∞—é—â–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã]

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (CRITICAL)
[–ë–∞–≥–∏, —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, data corruption]

## üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (HIGH)
[–¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º]

## üü¢ –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (MEDIUM)
[–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å]

## ‚ö™ –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è (LOW)
[–ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å]

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
### –ü–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º:
### –ü–æ—Å–ª–µ –º–µ—Ä–∂–∞:
```

---

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ LLM

–í `docker-compose.yml`:
```yaml
environment:
  - LLM_MODEL=llama-3-70b-instruct  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à—É –º–æ–¥–µ–ª—å
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å LLM)

```yaml
environment:
  - LLM_TEMPERATURE=0.1   # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π (–º–µ–Ω—å—à–µ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏)
  - LLM_TEMPERATURE=0.3   # –ë–æ–ª–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π
```

### –£–≤–µ–ª–∏—á–µ–Ω–∏–µ max_tokens (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤)

```yaml
environment:
  - LLM_MAX_TOKENS=32000  # –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π –≤ config.yml

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```yaml
paths:
  SUMMARY_FILE: /app/output/my_custom_report.md
  LOG_FILE: /app/logs/custom.log
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Cannot connect to LLM API"

**–ü—Ä–æ–±–ª–µ–º–∞:** Docker –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –≤–∞—à–µ–π LLM.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ LM Studio –∑–∞–ø—É—â–µ–Ω
2. –í LM Studio –≤–∫–ª—é—á–∏—Ç–µ "Allow network connections"
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `host.docker.internal` –≤–º–µ—Å—Ç–æ `localhost`:
   ```yaml
   - LLM_API_URL=http://host.docker.internal:1234/v1/chat/completions
   ```

### –û—à–∏–±–∫–∞: "Project directory not found"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –ø–∞–ø–æ–∫.

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
volumes:
  # –°–ª–µ–≤–∞ ‚Äî –≤–∞—à –†–ï–ê–õ–¨–ù–´–ô –ø—É—Ç—å –Ω–∞ –¥–∏—Å–∫–µ
  # –°–ø—Ä–∞–≤–∞ ‚Äî –ø—É—Ç—å –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  - C:\Work\Projects:/projects  # Windows
  - /home/user/projects:/projects  # Linux
```

–ó–∞—Ç–µ–º –≤ –∫–æ–º–∞–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ü–†–ê–í–´–ô –ø—É—Ç—å:
```bash
--project /projects/my-plugin  # –ù–ï C:\Work\Projects\my-plugin
```

### –û—à–∏–±–∫–∞: "Diff file not found"

**–ü—Ä–æ–±–ª–µ–º–∞:** Diff —Ñ–∞–π–ª –Ω–µ –≤ –ø–∞–ø–∫–µ `inputs/` –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `inputs/`: `ls inputs/`
2. –í –∫–æ–º–∞–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `--diff /inputs/—Ç–æ—á–Ω–æ–µ-–∏–º—è-—Ñ–∞–π–ª–∞.diff`

### LLM —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å –ø–æ–º–µ–Ω—å—à–µ (7B-13B –≤–º–µ—Å—Ç–æ 70B)
2. –£–º–µ–Ω—å—à–∏—Ç–µ `max_tokens` –≤ docker-compose.yml
3. –í–∫–ª—é—á–∏—Ç–µ GPU –≤ LM Studio (–µ—Å–ª–∏ –µ—Å—Ç—å –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞)

### –°–∫—Ä–∏–ø—Ç—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (Permission denied)

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª—ã –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ Windows —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:
```bash
docker compose build --no-cache
```

–í Dockerfile –µ—Å—Ç—å `dos2unix` –∏ `chmod +x` ‚Äî –æ–Ω–∏ –∏—Å–ø—Ä–∞–≤—è—Ç –ø—Ä–æ–±–ª–µ–º—É.

---

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –†–µ–≤—å—é —Ñ–∏—á–∏ –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º –≤ dev

```bash
# 1. –ü–æ–ª—É—á–∞–µ–º diff
cd C:\Work\Projects\opensearch-plugin
git diff dev..feature/new-aggregation > new-agg.diff

# 2. –ö–ª–∞–¥–µ–º –≤ inputs
copy new-agg.diff C:\ai-code-reviewer\inputs\

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–≤—å—é
cd C:\ai-code-reviewer
docker compose run --rm code-review \
  --diff /inputs/new-agg.diff \
  --project /projects/opensearch-plugin

# 4. –ß–∏—Ç–∞–µ–º –æ—Ç—á–µ—Ç
notepad review_results\summary.md
```

### –ü—Ä–∏–º–µ—Ä 2: –†–µ–≤—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

–ú–æ–∂–Ω–æ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫:

```yaml
volumes:
  - C:\Work\backend:/projects/backend
  - C:\Work\frontend:/projects/frontend
  - ./inputs:/inputs
```

–ó–∞—Ç–µ–º:
```bash
# Backend
docker compose run --rm code-review \
  --diff /inputs/backend-changes.diff \
  --project /projects/backend

# Frontend
docker compose run --rm code-review \
  --diff /inputs/frontend-changes.diff \
  --project /projects/frontend
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

```bash
# –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞
docker compose run --rm \
  -e LLM_MODEL=mistral-7b \
  code-review --diff /inputs/draft.diff --project /projects/plugin

# –ú–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
docker compose run --rm \
  -e LLM_MODEL=llama-3-70b \
  code-review --diff /inputs/final.diff --project /projects/plugin
```

---

## üéì –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. –†–∞–∑–º–µ—Ä diff

- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ:** 5-30 —Ñ–∞–π–ª–æ–≤, –¥–æ 2000 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ö†Ô∏è **–î–æ–ª–≥–æ:** 50+ —Ñ–∞–π–ª–æ–≤, 5000+ —Å—Ç—Ä–æ–∫ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å —á–∞—Å)
- ‚ùå **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –ë–æ–ª—å—à–µ 100 —Ñ–∞–π–ª–æ–≤ (—Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ —á–∞—Å—Ç–∏)

### 2. –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–≤—å—é

**–î–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å 13B-20B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–¥–∏–Ω MR / —Ñ–∏—á—É –∑–∞ —Ä–∞–∑
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ –∞–∫—Ç–∏–≤–Ω–∞ `dev` –≤–µ—Ç–∫–∞ (–∏–ª–∏ —Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–π —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç–µ)

### 3. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞

- üî¥ **CRITICAL** ‚Äî –∏—Å–ø—Ä–∞–≤–∏—Ç—å –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
- üü° **HIGH** ‚Äî –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- üü¢ **MEDIUM** ‚Äî –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –Ω–æ –Ω–µ –±–ª–æ–∫–µ—Ä
- ‚ö™ **LOW** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å

**–°–µ–∫—Ü–∏—è "Query Language Impact"** ‚Äî —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞!

### 4. –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

LLM –º–æ–∂–µ—Ç –æ—à–∏–±–∞—Ç—å—Å—è. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:
- –ï—Å–ª–∏ LLM –≥–æ–≤–æ—Ä–∏—Ç "–º–µ—Ç–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω" ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –º–æ–∂–µ—Ç –æ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥—Ä—É–≥–æ–º —Ñ–∞–π–ª–µ —ç—Ç–æ–≥–æ –∂–µ MR
- –ï—Å–ª–∏ –∂–∞–ª—É–µ—Ç—Å—è –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –∫–æ–¥ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–¥—Ä–∞–≤—ã–π —Å–º—ã—Å–ª ‚Äî LLM –ø–æ–º–æ—â–Ω–∏–∫, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–º—É —Ä–µ–≤—å—é

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   git diff file     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ extract_mr_context  ‚îÇ ‚Üê –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (LLM)
‚îÇ –°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç MR ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  split_by_class.sh  ‚îÇ ‚Üê –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Ñ–∞–π–ª—ã (–±–µ–∑ LLM)
‚îÇ  –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   review_chunk.py   ‚îÇ ‚Üê –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ (LLM)
‚îÇ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞   ‚îÇ   + MR –∫–æ–Ω—Ç–µ–∫—Å—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ summarize_reviews   ‚îÇ ‚Üê –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç (LLM)
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   summary.md üéØ     ‚îÇ ‚Üê –ò–¢–û–ì–û–í–´–ô –§–ê–ô–õ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**3 –≤—ã–∑–æ–≤–∞ LLM:**
1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (1 —Ä–∞–∑)
2. –†–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ (N —Ä–∞–∑)
3. –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç (1 —Ä–∞–∑)

---

## üìù –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- `dockerfile` ‚Äî –æ–±—Ä–∞–∑ Docker —Å Python, bash, —É—Ç–∏–ª–∏—Ç–∞–º–∏
- `docker-compose.yml` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å–∫–∞
- `config.yml` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π –∏ LLM
- `entrypoint.sh` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –ø—Ä–∏–º–µ–Ω—è–µ—Ç env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `main.sh` ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
- `extract_mr_context.py` ‚Äî –∞–Ω–∞–ª–∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `split_by_class.sh` ‚Äî —Ä–∞–∑–±–∏–≤–∫–∞ diff –Ω–∞ —Ñ–∞–π–ª—ã
- `review_chunk.py` ‚Äî —Ä–µ–≤—å—é –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- `run_reviews.sh` ‚Äî –∑–∞–ø—É—Å–∫ —Ä–µ–≤—å—é –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤
- `summarize_reviews.py` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–õ–æ–≥–∏:**
- –í—Å–µ –ª–æ–≥–∏ –≤ `review_logs/run_reviews.log`
- –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LLM: `curl http://localhost:1234/v1/models`
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑: `docker compose build --no-cache`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—É—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–∞–ø–ª–µ–Ω—ã –≤ volumes

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:**
- –°–∫–æ—Ä–æ—Å—Ç–∏ –≤–∞—à–µ–π LLM (GPU >> CPU)
- –†–∞–∑–º–µ—Ä–∞ –º–æ–¥–µ–ª–∏ (7B –±—ã—Å—Ç—Ä–µ–µ 70B)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤ –≤ diff

**–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è:**
- 1 —Ñ–∞–π–ª: ~30 —Å–µ–∫
- 10 —Ñ–∞–π–ª–æ–≤: ~5-7 –º–∏–Ω—É—Ç
- 30 —Ñ–∞–π–ª–æ–≤: ~15-20 –º–∏–Ω—É—Ç

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU –¥–ª—è LLM
- –í—ã–±–∏—Ä–∞–π—Ç–µ –º–æ–¥–µ–ª—å 13B (–±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ)
- –ù–µ —Ä–µ–≤—å—é–π—Ç–µ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ MR (—Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ —á–∞—Å—Ç–∏)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

---

**–£–¥–∞—á–Ω–æ–≥–æ —Ä–µ–≤—å—é! üöÄ**